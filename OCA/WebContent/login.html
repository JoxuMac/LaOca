<!-- 
LA OCA - 2017 - Tecnologias y Sistemas Web
Escuela Superior de Informatica de Ciudad Real 

Josue Gutierrez Duran
Sonia Querencia Martin
Enrique Simarro Santamaria
Eduardo Fuentes Garcia De Blas
-->

<!DOCTYPE html>
<html>
<head>
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<meta name="google-signin-client_id" content="253852485413-irovlddf0j56dp75hqg3ohb2o4oe8nl2.apps.googleusercontent.com">
	
	<script type="text/javascript">
		if (localStorage.getItem("nombre")!=null)
			location.href="dashboard.html";
	</script>

	<meta charset="UTF-8">
	<title>LA OCA | Entrar</title>
	<link rel="shortcut icon" href="./images/favicon.ico" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	
	<!-- Temas-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="./css/estilo.css">
	
	<script>
		function $_GET(param) {
			var vars = {};
			window.location.href.replace( location.hash, '' ).replace( 
				/[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
				function( m, key, value ) { // callback
					vars[key] = value !== undefined ? value : '';
				}
			);
	
			if ( param ) {
				return vars[param] ? vars[param] : null;	
			}
			return vars;
		}
	</script>
	
</head>
<body>
	<div id="Contenedor" style="height:auto; padding-bottom:10px;"">	 
		<div class="Icon"><img class="avatar" src="./profile/default.png"><!-- <span class="glyphicon glyphicon-user"></span>--></div>
		
		<div class="page-header">
	  		<h1>LA OCA - Entrar</h1>
		</div>
		<div id="err" class="alert alert-danger" style="display:none">
		  <strong>¡ERROR!</strong> Usuario o Contraseña erroneos
		</div>
		<div class="ContentForm">
		 	<form name="FormEntrar" action="" method="GET">	
		 		<div class="input-group input-group-lg">
				  <span class="input-group-addon" id="sizing-addon1"><i class="glyphicon glyphicon-user"></i></span>
				  <input type="text" class="form-control" name="nombre" placeholder="Usuario o Correo Electronico" id="Nombre" aria-describedby="sizing-addon1" required>
				</div>
				<br>
				<div class="input-group input-group-lg">
				  <span class="input-group-addon" id="sizing-addon1"><i class="glyphicon glyphicon-lock"></i></span>
				  <input type="password" name="pass" class="form-control" placeholder="******" id="pass" aria-describedby="sizing-addon1" required>
				</div>			
				<br>
				<button type="submit" class="btn btn-lg btn-primary btn-block btn-signin" id="IngresoLog" onclick = "login()">Aceptar
				</button>
				<br>
				<button class="btn btn-lg btn-primary btn-block btn-signin" id="IngresoLog2" type="button" value="enviar" onclick = "location='./index.html'">Cancelar</button>
				<br>
				<div class="g-signin2" data-onsuccess="onSignIn">Login</div>
				<br>
				<a href="#" onclick="signOut();">Sign out</a>
				<div class="opcioncontra"><a href="recordarPass.html">¿Olvidaste tu contraseñaa?</a></div>
				
				
				
				
		 	</form>
		 </div>	
	 </div>
	 <script>
	 function onSignIn(googleUser) {
		  if(sessionStorage.logueado!=true){
		      console.log('PASA LOGIN');

			  var profile = googleUser.getBasicProfile();
			  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
			  console.log('Name: ' + profile.getName());
			  console.log('Image URL: ' + profile.getImageUrl());
			  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
			  loginGoogle(profile);
		  }
	 }
	 </script>
	<script>
  	function signOut() {
	    var auth2 = gapi.auth2.getAuthInstance();
	    auth2.signOut().then(function () {
	      console.log('User signed out.');
    		});
  	}

	</script>
	 <script src="scripts/GestionCuentas.js"></script>
	 
	 <script>
		if($_GET('err')==1)
			document.getElementById('err').style.display = 'block' ;
	</script>
</body>
</html>