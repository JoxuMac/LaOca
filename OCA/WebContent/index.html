<!-- 
LA OCA - 2017 - Tecnologias y Sistemas Web
Escuela Superior de Informatica de Ciudad Real 

Josue Gutierrez Duran
Sonia Querencia Martin
Enrique Simarro Santamaria
Eduardo Fuentes Garcia De Blas
-->

<!DOCTYPE html>
<html>
<head>
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<meta name="google-signin-client_id" content="253852485413-irovlddf0j56dp75hqg3ohb2o4oe8nl2.apps.googleusercontent.com">

	<script type="text/javascript">
		if (localStorage.getItem("nombre")!=null)
			location.href="dashboard.html";
	</script>
	
	<meta charset="UTF-8">
	<title>LA OCA | Inicio</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<link rel="shortcut icon" href="./images/favicon.ico" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	
	<!-- Temas-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="./css/estilo.css">

	<script>
		function $_GET(param) {
			var vars = {};
			window.location.href.replace( location.hash, '' ).replace( 
				/[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
				function( m, key, value ) { // callback
					vars[key] = value !== undefined ? value : '';
				}
			);
	
			if ( param ) {
				return vars[param] ? vars[param] : null;	
			}
			return vars;
		}
	</script>
</head>
<body>
	<div id="Contenedor" class="col-md-offset-3">	 
		<div class="Icon"><img class="avatar" src="./profile/default.png"><!-- <span class="glyphicon glyphicon-user"></span>--></div>
	
		<div class="page-header">
	  		<h1>LA OCA</h1>
		</div>
		<div id="err1" class="alert alert-danger" style="display:none">
		  <strong>¡ERROR!</strong> No se pudo recuperar la contraseña
		</div>
		<div id="err2" class="alert alert-danger" style="display:none">
		  <strong>¡ERROR!</strong> Enlace caducado
		</div>
		<div id="err3" class="alert alert-danger" style="display:none">
		  <strong>¡ERROR!</strong> No se pudo cambiar la contraseña
		</div>
		<div id="err0" class="alert alert-success" style="display:none">
		  <strong>¡CORRECTO!</strong> Se envio tu nueva contraseña a tu Correo Electronico
		</div>
		<div class="ContentForm">
		 	<form action="" method="post" name="FormEntrar">				
				<br>
				<button class="btn btn-lg btn-primary btn-block btn-signin" id="IngresoLog" type="button" value="enviar" onclick = "location='./registro.html'">Registrarse</button>
				<br>
				<button class="btn btn-lg btn-primary btn-block btn-signin" id="IngresoLog" type="button" value="enviar" onclick = "location='./login.html'">Ya tengo cuenta</button>
				<br>
				<button class="btn btn-lg btn-primary btn-block btn-signin" id="IngresoLog" type="button" value="enviar" onclick = "location='./sinRegistro.html'">Sin registro</button>
				<br>
				<div class="g-signin2" data-onsuccess="onSignIn"></div>
				<a href="#" onclick="signOut();">Sign out</a>
				
				<div class="opcioncontra"><a href="recordarPass.html">¿Olvidaste tu contraseña?</a></div>
				
		 	</form>
		 </div>
	 </div>
	 <script>
	 function onSignIn(googleUser) {
		  console.log('Registrando...');
		  var profile = googleUser.getBasicProfile();
		  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
		  console.log('Name: ' + profile.getName());
		  console.log('Image URL: ' + profile.getImageUrl());
		  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
		  registrarGoogle(profile);
	 }
	 </script>
	<script>
  	function signOut() {
	    var auth2 = gapi.auth2.getAuthInstance();
	    auth2.signOut().then(function () {
	      console.log('User signed out.');
    		});
  	}

	</script>
	<script src="scripts/GestionCuentas.js"></script>
	
	 
	 <script>
		if($_GET('err')==1)
			document.getElementById('err1').style.display = 'block' ;
	</script>
	<script>
		if($_GET('err')==2)
			document.getElementById('err2').style.display = 'block' ;
	</script>
	<script>
		if($_GET('err')==3)
			document.getElementById('err3').style.display = 'block' ;
	</script>
	<script>
		if($_GET('err')==0)
			document.getElementById('err0').style.display = 'block' ;
	</script>
</body>
</html>